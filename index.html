<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Shopee å®šä»·è®¡ç®—å™¨</title>
  <style>
    body {
      font-family: "Segoe UI", sans-serif;
      max-width: 600px;
      margin: 40px auto;
      padding: 20px;
      background: #f9f9f9;
      color: #333;
    }
    h1 {
      text-align: center;
      color: #ee4d2d; /* Shopee çº¢ */
    }
    .form-group {
      margin-bottom: 15px;
    }
    label {
      display: block;
      margin-bottom: 5px;
      font-weight: bold;
    }
    input, select {
      width: 100%;
      padding: 8px;
      border: 1px solid #ccc;
      border-radius: 4px;
      box-sizing: border-box;
    }
    .result {
      background: white;
      padding: 15px;
      border-radius: 8px;
      margin-top: 20px;
      box-shadow: 0 2px 6px rgba(0,0,0,0.1);
    }
    .highlight {
      font-size: 1.2em;
      color: #e74c3c;
      font-weight: bold;
    }
    button {
      width: 100%;
      padding: 12px;
      background: #ee4d2d;
      color: white;
      border: none;
      border-radius: 4px;
      font-size: 16px;
      cursor: pointer;
    }
    button:hover {
      background: #d03a1f;
    }
  </style>
</head>
<body>
  <h1>ğŸ›’ Shopee å®šä»·è®¡ç®—å™¨</h1>

  <div class="form-group">
    <label for="site">Shopee ç«™ç‚¹</label>
    <select id="site">
      <option value="tw" data-commission="5" data-fee="0">å°æ¹¾ (ä½£é‡‘ 5%)</option>
      <option value="my" data-commission="5" data-fee="2">é©¬æ¥ (ä½£é‡‘ 5% + æ‰‹ç»­è´¹ 2%)</option>
      <option value="th" data-commission="5" data-fee="0">æ³°å›½ (ä½£é‡‘ 5%)</option>
      <option value="sg" data-commission="6" data-fee="0">æ–°åŠ å¡ (ä½£é‡‘ 6%)</option>
      <option value="custom">è‡ªå®šä¹‰</option>
    </select>
  </div>

  <div class="form-group">
    <label>é‡‡è´­æˆæœ¬ï¼ˆå…ƒï¼‰</label>
    <input type="number" id="cost" placeholder="ä¾‹å¦‚ï¼š15.00" step="0.01" value="15">
  </div>

  <div class="form-group">
    <label>è¿è´¹ï¼ˆå…ƒï¼‰</label>
    <input type="number" id="shipping" placeholder="ä¾‹å¦‚ï¼š3.00" step="0.01" value="3">
  </div>

  <div class="form-group">
    <label>åŒ…è£…æˆæœ¬ï¼ˆå…ƒï¼‰</label>
    <input type="number" id="packaging" placeholder="ä¾‹å¦‚ï¼š1.00" step="0.01" value="1">
  </div>

  <div class="form-group">
    <label>å…¶ä»–æˆæœ¬ï¼ˆå…ƒï¼‰</label>
    <input type="number" id="other" placeholder="ä¾‹å¦‚ï¼š0.50" step="0.01" value="0.5">
  </div>

  <div class="form-group">
    <label>ç›®æ ‡åˆ©æ¶¦ç‡ï¼ˆ%ï¼‰</label>
    <input type="number" id="profit" placeholder="ä¾‹å¦‚ï¼š30" value="30">
  </div>

  <div class="form-group">
    <label>è¥é”€è´¹ç”¨ï¼ˆå¹¿å‘Š/ä¼˜æƒ åˆ¸ï¼Œå…ƒï¼‰</label>
    <input type="number" id="marketing" placeholder="ä¾‹å¦‚ï¼š2.00" step="0.01" value="2">
  </div>

  <!-- è‡ªå®šä¹‰ä½£é‡‘/æ‰‹ç»­è´¹ï¼ˆé»˜è®¤éšè—ï¼‰ -->
  <div class="form-group" id="custom-fields" style="display:none;">
    <label>å¹³å°ä½£é‡‘ï¼ˆ%ï¼‰</label>
    <input type="number" id="commission" value="5" step="0.1">
    <label>äº¤æ˜“æ‰‹ç»­è´¹ï¼ˆ%ï¼‰</label>
    <input type="number" id="fee" value="0" step="0.1">
  </div>

  <button onclick="calculate()">ç«‹å³è®¡ç®—å»ºè®®å”®ä»·</button>

  <div class="result" id="result" style="display:none;">
    <p>âœ… æ€»æˆæœ¬ï¼š<span id="totalCost"></span> å…ƒ</p>
    <p>ğŸ¯ ç›®æ ‡å”®ä»·ï¼ˆä¸å«å¹³å°è´¹ï¼‰ï¼š<span id="targetPrice"></span> å…ƒ</p>
    <p>ğŸ’¡ <strong>å»ºè®®ä¸Šæ¶å”®ä»·ï¼ˆå«å¹³å°è´¹ & è¥é”€ï¼‰ï¼š</strong><br>
       <span class="highlight" id="finalPrice"></span> å…ƒ</p>
    <p>ğŸ“Œ æç¤ºï¼šå·²è‡ªåŠ¨ä¼˜åŒ–ä¸º .99 ç»“å°¾ï¼Œæå‡è½¬åŒ–ç‡ï¼</p>
  </div>

  <script>
    document.getElementById('site').addEventListener('change', function() {
      const custom = document.getElementById('custom-fields');
      if (this.value === 'custom') {
        custom.style.display = 'block';
      } else {
        custom.style.display = 'none';
      }
    });

    function calculate() {
      const siteSel = document.getElementById('site');
      let commission = 5, fee = 0;
      
      if (siteSel.value === 'custom') {
        commission = parseFloat(document.getElementById('commission').value) || 0;
        fee = parseFloat(document.getElementById('fee').value) || 0;
      } else {
        const option = siteSel.selectedOptions[0];
        commission = parseFloat(option.dataset.commission);
        fee = parseFloat(option.dataset.fee);
      }

      const cost = parseFloat(document.getElementById('cost').value) || 0;
      const shipping = parseFloat(document.getElementById('shipping').value) || 0;
      const packaging = parseFloat(document.getElementById('packaging').value) || 0;
      const other = parseFloat(document.getElementById('other').value) || 0;
      const profitPercent = parseFloat(document.getElementById('profit').value) || 0;
      const marketing = parseFloat(document.getElementById('marketing').value) || 0;

      const totalCost = cost + shipping + packaging + other;
      const targetPrice = totalCost * (1 + profitPercent / 100);
      const platformRate = (commission + fee) / 100;

      // è®¡ç®—ä¸Šæ¶ä»·ï¼šæ»¡è¶³ (ä¸Šæ¶ä»· * (1 - platformRate)) - marketing >= targetPrice
      let finalPrice = (targetPrice + marketing) / (1 - platformRate);

      // å¿ƒç†å®šä»·ï¼šå‘ä¸Šå–æ•´åˆ° .99
      finalPrice = Math.ceil(finalPrice) - 0.01;
      if (finalPrice < 0) finalPrice = 0;

      // æ˜¾ç¤ºç»“æœ
      document.getElementById('totalCost').textContent = totalCost.toFixed(2);
      document.getElementById('targetPrice').textContent = targetPrice.toFixed(2);
      document.getElementById('finalPrice').textContent = finalPrice.toFixed(2);
      document.getElementById('result').style.display = 'block';
    }
  </script>
</body>
</html>