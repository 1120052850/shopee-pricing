<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>ä¸œå—äºšè·¨å¢ƒå®šä»·è®¡ç®—å™¨</title>
  <meta name="description" content="Shopee / Lazada / TikTok å®šä»·å·¥å…· Â· å·¦å³å¸ƒå±€">
  <style>
    * { box-sizing: border-box; margin: 0; padding: 0; }
    body {
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
      background: #f8f9fa;
      color: #333;
      line-height: 1.5;
    }
    .container {
      display: flex;
      max-width: 1200px;
      margin: 0 auto;
      min-height: 100vh;
      box-shadow: 0 0 20px rgba(0,0,0,0.08);
      background: white;
    }

    /* å·¦ä¾§ï¼šè¾“å…¥åŒº */
    .input-panel {
      flex: 0 0 60%;
      padding: 30px;
      background: #fff;
      border-right: 1px solid #eee;
    }
    .input-panel h1 {
      color: #ee4d2d;
      margin-bottom: 25px;
      font-size: 24px;
    }
    .subtitle {
      color: #666;
      margin-bottom: 25px;
      font-size: 14px;
    }

    .form-group {
      margin-bottom: 20px;
    }
    label {
      display: block;
      margin-bottom: 6px;
      font-weight: 600;
      color: #444;
    }
    input, select {
      width: 100%;
      padding: 10px 12px;
      border: 1px solid #ddd;
      border-radius: 6px;
      font-size: 15px;
    }
    .note {
      font-size: 13px;
      color: #888;
      margin-top: 5px;
    }

    button {
      width: 100%;
      padding: 14px;
      background: #ee4d2d;
      color: white;
      border: none;
      border-radius: 6px;
      font-size: 17px;
      font-weight: bold;
      cursor: pointer;
      transition: background 0.2s;
      margin-top: 10px;
    }
    button:hover {
      background: #d03a1f;
    }

    /* å³ä¾§ï¼šç»“æœåŒº */
    .result-panel {
      flex: 0 0 40%;
      padding: 30px;
      background: #fafafa;
      display: flex;
      flex-direction: column;
      justify-content: center;
    }
    .result-placeholder {
      text-align: center;
      color: #999;
      padding: 20px;
    }
    .result-box {
      background: white;
      border-radius: 10px;
      padding: 25px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.05);
      border-left: 4px solid #ee4d2d;
    }
    .result-item {
      margin-bottom: 15px;
    }
    .result-label {
      font-size: 14px;
      color: #666;
      margin-bottom: 4px;
    }
    .result-value {
      font-size: 18px;
      font-weight: bold;
      color: #333;
    }
    .final-price {
      font-size: 24px;
      color: #e74c3c;
      margin: 10px 0;
    }
    .local-price {
      font-size: 20px;
      color: #2c3e50;
      font-weight: bold;
    }

    /* å“åº”å¼ï¼šå°å±å˜ä¸Šä¸‹å¸ƒå±€ */
    @media (max-width: 768px) {
      .container {
        flex-direction: column;
        min-height: auto;
      }
      .input-panel, .result-panel {
        flex: none;
        width: 100%;
        padding: 20px;
      }
      .input-panel {
        border-right: none;
        border-bottom: 1px solid #eee;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <!-- å·¦ä¾§ï¼šè¾“å…¥ -->
    <div class="input-panel">
      <h1>ğŸŒ ä¸œå—äºšè·¨å¢ƒå®šä»·è®¡ç®—å™¨</h1>
      <p class="subtitle">æ”¯æŒ Shopee / Lazada / TikTok Shop Â· è¶Šå— & æ³°å›½ç«™ç‚¹</p>

      <div class="form-group">
        <label for="site">é€‰æ‹©å¹³å°ä¸ç«™ç‚¹</label>
        <select id="site">
          <optgroup label="Shopee">
            <option value="shopee_vn">Shopee è¶Šå—ï¼ˆè·¨å¢ƒï¼‰</option>
            <option value="shopee_th_cross">Shopee æ³°å›½ï¼ˆè·¨å¢ƒï¼‰</option>
            <option value="shopee_th_local">Shopee æ³°å›½ï¼ˆæœ¬åœŸï¼‰</option>
          </optgroup>
          <optgroup label="Lazada">
            <option value="lazada_vn">Lazada è¶Šå—ï¼ˆè·¨å¢ƒï¼‰</option>
            <option value="lazada_th">Lazada æ³°å›½ï¼ˆè·¨å¢ƒï¼‰</option>
          </optgroup>
          <optgroup label="TikTok Shop">
            <option value="tiktok_vn">TikTok è¶Šå—</option>
            <option value="tiktok_th">TikTok æ³°å›½</option>
          </optgroup>
          <option value="custom">è‡ªå®šä¹‰</option>
        </select>
      </div>

      <div class="form-group">
        <label>é‡‡è´­æˆæœ¬ï¼ˆå…ƒï¼‰</label>
        <input type="number" id="cost" placeholder="ä¾‹å¦‚ï¼š30.00" step="0.01" value="30">
      </div>

      <div class="form-group">
        <label>å•†å“é‡é‡ï¼ˆå…‹ï¼‰</label>
        <input type="number" id="weight" placeholder="ä¾‹å¦‚ï¼š150" value="150" min="1">
        <div class="note">è‡ªåŠ¨è®¡ç®—å¹²çº¿ç‰©æµï¼ˆåŸºäºå—å®ä»“ä»·å¡ï¼‰</div>
      </div>

      <div class="form-group">
        <label>åŒ…è£…æˆæœ¬ï¼ˆå…ƒï¼‰</label>
        <input type="number" id="packaging" placeholder="ä¾‹å¦‚ï¼š1.00" step="0.01" value="1">
      </div>

      <div class="form-group">
        <label>ç›®æ ‡åˆ©æ¶¦ç‡ï¼ˆ%ï¼‰</label>
        <input type="number" id="profit" placeholder="ä¾‹å¦‚ï¼š30" value="30">
      </div>

      <div class="form-group">
        <label>è¥é”€è´¹ç”¨ï¼ˆå¹¿å‘Š/ä¼˜æƒ åˆ¸ï¼Œå…ƒï¼‰</label>
        <input type="number" id="marketing" placeholder="ä¾‹å¦‚ï¼š2.00" step="0.01" value="0">
        <div class="note">å¤§ä¿ƒæ—¶å»ºè®®è®¾ä¸º 0</div>
      </div>

      <!-- è‡ªå®šä¹‰å­—æ®µ -->
      <div class="form-group" id="custom-fields" style="display:none;">
        <label>å¹³å°ä½£é‡‘ï¼ˆ%ï¼‰</label>
        <input type="number" id="commission" value="5" step="0.1">
        <label>äº¤æ˜“æ‰‹ç»­è´¹ï¼ˆ%ï¼‰</label>
        <input type="number" id="fee" value="2" step="0.1">
        <label>æœåŠ¡è´¹ï¼ˆ%ï¼‰</label>
        <input type="number" id="serviceFee" value="0" step="0.1">
        <label>æ±‡ç‡ï¼ˆ1 CNY = ? æœ¬åœ°å¸ï¼‰</label>
        <input type="number" id="exchange" value="3700" step="1">
      </div>

      <button onclick="calculate()">ğŸš€ ç«‹å³è®¡ç®—å»ºè®®å”®ä»·</button>
    </div>

    <!-- å³ä¾§ï¼šç»“æœ -->
    <div class="result-panel">
      <div id="result-placeholder" class="result-placeholder">
        <p>å¡«å†™å·¦ä¾§å‚æ•°<br>ç‚¹å‡»â€œç«‹å³è®¡ç®—â€<br>æŸ¥çœ‹å®šä»·å»ºè®®</p>
      </div>
      <div id="result-box" class="result-box" style="display:none;">
        <div class="result-item">
          <div class="result-label">ğŸ“¦ æ€»æˆæœ¬</div>
          <div class="result-value" id="totalCost">â€”</div>
        </div>
        <div class="result-item">
          <div class="result-label">ğŸ¯ ç›®æ ‡å‡€æ”¶å…¥</div>
          <div class="result-value" id="targetNet">â€”</div>
        </div>
        <div class="result-item">
          <div class="result-label">ğŸ’¡ å»ºè®®ä¸Šæ¶ä»·ï¼ˆäººæ°‘å¸ï¼‰</div>
          <div class="final-price" id="finalPriceRMB">â€”</div>
        </div>
        <div class="result-item">
          <div class="result-label">ğŸŒ æœ¬åœ°è´§å¸å»ºè®®ä»·</div>
          <div class="local-price" id="localPrice">â€”</div>
        </div>
        <div style="margin-top:20px; font-size:13px; color:#777;">
          âœ… å·²å«ï¼šå¹³å°è´¹ + å¹²çº¿ç‰©æµ<br>
          ğŸ’¡ ä»·æ ¼å·²ä¼˜åŒ–ä¸º .99 ç»“å°¾
        </div>
      </div>
    </div>
  </div>

  <script>
    // å¹²çº¿ä»·å¡ï¼ˆVNDï¼‰
    const vnShippingTiers = [[30,3500],[50,4000],[100,4400],[200,5300],[300,6200],[500,7800],[1000,11000]];
    function getThailandShipping(w) {
      if (w<=100) return 29; if (w<=200) return 45; if (w<=500) return 80; return 120;
    }

    document.getElementById('site').addEventListener('change', e => {
      document.getElementById('custom-fields').style.display = e.target.value === 'custom' ? 'block' : 'none';
    });

    function calculate() {
      const site = document.getElementById('site').value;
      let commission=0, fee=0, serviceFee=0, exchangeRate=1, shippingRMB=0;
      const weight = parseFloat(document.getElementById('weight').value) || 100;

      switch(site) {
        case 'shopee_vn':
          [commission, fee, serviceFee, exchangeRate] = [15.33, 4.91, 5.0, 3700];
          shippingRMB = (vnShippingTiers.find(([w])=>weight<=w)?.[1] || 11000) / 3700;
          break;
        case 'shopee_th_cross':
          [commission, fee, serviceFee, exchangeRate] = [18.19, 3.21, 5.35, 5];
          shippingRMB = getThailandShipping(weight);
          break;
        case 'shopee_th_local':
          [commission, fee, serviceFee, exchangeRate] = [8.56, 3.21, 7.49, 5];
          shippingRMB = 1.0;
          break;
        case 'lazada_vn':
          [commission, fee, serviceFee, exchangeRate] = [4, 2, 0, 3700];
          shippingRMB = (vnShippingTiers.find(([w])=>weight<=w)?.[1] || 3500) / 3700;
          break;
        case 'lazada_th':
          [commission, fee, serviceFee, exchangeRate] = [4, 2, 0, 5];
          shippingRMB = getThailandShipping(weight) * 0.8;
          break;
        case 'tiktok_vn':
          [commission, fee, serviceFee, exchangeRate] = [5, 2, 0, 3700];
          shippingRMB = (vnShippingTiers.find(([w])=>weight<=w)?.[1] || 3500) / 3700;
          break;
        case 'tiktok_th':
          [commission, fee, serviceFee, exchangeRate] = [5, 2, 0, 5];
          shippingRMB = getThailandShipping(weight) * 0.9;
          break;
        default:
          commission = parseFloat(document.getElementById('commission').value) || 0;
          fee = parseFloat(document.getElementById('fee').value) || 0;
          serviceFee = parseFloat(document.getElementById('serviceFee').value) || 0;
          exchangeRate = parseFloat(document.getElementById('exchange').value) || 1;
          shippingRMB = parseFloat(document.getElementById('shipping').value) || 0;
      }

      const totalRate = (commission + fee + serviceFee) / 100;
      if (totalRate >= 1) { alert("å¹³å°è´¹ç‡ä¸èƒ½ â‰¥ 100%"); return; }

      const cost = parseFloat(document.getElementById('cost').value) || 0;
      const packaging = parseFloat(document.getElementById('packaging').value) || 0;
      const profit = parseFloat(document.getElementById('profit').value) || 0;
      const marketing = parseFloat(document.getElementById('marketing').value) || 0;

      const totalCost = cost + shippingRMB + packaging;
      const targetNet = totalCost * (1 + profit / 100);
      let finalRMB = (targetNet + marketing) / (1 - totalRate);
      finalRMB = Math.ceil(finalRMB) - 0.01;
      if (finalRMB < 0) finalRMB = 0;

      const localVal = finalRMB * exchangeRate;
      const currency = site.includes('vn') ? 'VND' : 'THB';
      const localStr = currency === 'VND' ? Math.round(localVal).toLocaleString() : localVal.toFixed(0);

      // æ›´æ–°ç»“æœ
      document.getElementById('totalCost').textContent = totalCost.toFixed(2) + ' å…ƒ';
      document.getElementById('targetNet').textContent = targetNet.toFixed(2) + ' å…ƒ';
      document.getElementById('finalPriceRMB').textContent = finalRMB.toFixed(2) + ' å…ƒ';
      document.getElementById('localPrice').textContent = ` $ {localStr}  $ {currency}`;

      // æ˜¾ç¤ºç»“æœåŒº
      document.getElementById('result-placeholder').style.display = 'none';
      document.getElementById('result-box').style.display = 'block';
    }
  </script>
</body>
</html>
